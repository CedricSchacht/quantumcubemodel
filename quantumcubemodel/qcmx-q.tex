\newcommand{\qcmxO}[2][0]{
  \def\qcmxOamp{#2}
  \def\qcmxOphase{#1}
}
\newcommand{\qcmxI}[2][0]{
  \def\qcmxIamp{#2}
  \def\qcmxIphase{#1}
}
\newcommand{\qcmxClearQ}[0]{
  \qcmxO[0]{0}
  \qcmxI[0]{0}
}

\newcommand{\qcmxRenderQ}[0]{
  \ifx\qcmxOrientationQ\QCMXINTERNALCONSTANTX
    \QCMXINTERNALrenderQx
  \else\ifx\qcmxOrientationQ\QCMXINTERNALCONSTANTY
    \QCMXINTERNALrenderQy
  \else\ifx\qcmxOrientationQ\QCMXINTERNALCONSTANTZ
    \QCMXINTERNALrenderQz
  \else
    \PackageError{quantumcubemodel}{"\qcmxOrientationQ" is not in [\QCMXINTERNALCONSTANTX, \QCMXINTERNALCONSTANTY, \QCMXINTERNALCONSTANTZ]}[use \verb|\def\qcmxOrientationQ{x}| to fix this.]
  \fi\fi\fi
}

\newcommand{\QCMXINTERNALrenderQx}{
  \draw[gray, ultra thick] (\qcmxOffsetX, \qcmxOffsetY, 0) -- (10+\qcmxOffsetX, \qcmxOffsetY, 0);
  
  %\ket{0}
  \begin{scope}[canvas is xy plane at z=0, shift={(\qcmxOffsetX,\qcmxOffsetY)}, rotate around={\qcmxOphase:(0,0)}]
    \draw[fill=gray!30] (-1,-1) rectangle (1, 1);
    \draw[fill=QCMXINTERNALmaincolor] (-1,-1) rectangle (2*\qcmxOamp -1, 2*\qcmxOamp -1);
    \draw[black, ->, thick, >=Stealth] (-1.01,-1) -- (2*\qcmxOamp -1, -1);
  \end{scope}
  \node at (1.5+\qcmxOffsetX, -1.5+\qcmxOffsetY, 0) {\small{$\ket{0}$}};

  %\ket{1}
  \begin{scope}[canvas is xy plane at z=0, shift={(10+\qcmxOffsetX,\qcmxOffsetY)}, rotate around={\qcmxIphase:(0,0)}]
    \draw[fill=gray!30] (-1,-1) rectangle (1, 1);
    \draw[fill=QCMXINTERNALmaincolor] (-1,-1) rectangle (2*\qcmxIamp -1, 2*\qcmxIamp -1);
    \draw[black, ->, thick, >=Stealth] (-1.01,-1) -- (2*\qcmxIamp -1, -1);
  \end{scope}
  \node at (11.5+\qcmxOffsetX, -1.5+\qcmxOffsetY, 0) {\small{$\ket{1}$}};
}

\newcommand{\QCMXINTERNALrenderQy}{
  \draw[gray, ultra thick] (\qcmxOffsetX, \qcmxOffsetY, 0) -- (\qcmxOffsetX, 10+\qcmxOffsetY, 0);
  
  %\ket{0}
  \begin{scope}[canvas is xy plane at z=0, shift={(\qcmxOffsetX,\qcmxOffsetY)}, rotate around={\qcmxOphase:(0,0)}]
    \draw[fill=gray!30] (-1,-1) rectangle (1, 1);
    \draw[fill=QCMXINTERNALmaincolor] (-1,-1) rectangle (2*\qcmxOamp -1, 2*\qcmxOamp -1);
    \draw[black, ->, thick, >=Stealth] (-1.01,-1) -- (2*\qcmxOamp -1, -1);
  \end{scope}
  \node at (1.5+\qcmxOffsetX, -1.5+\qcmxOffsetY, 0) {\small{$\ket{0}$}};

  %\ket{1}
  \begin{scope}[canvas is xy plane at z=0, shift={(\qcmxOffsetX,10+\qcmxOffsetY)}, rotate around={\qcmxIphase:(0,0)}]
    \draw[fill=gray!30] (-1,-1) rectangle (1, 1);
    \draw[fill=QCMXINTERNALmaincolor] (-1,-1) rectangle (2*\qcmxIamp -1, 2*\qcmxIamp -1);
    \draw[black, ->, thick, >=Stealth] (-1.01,-1) -- (2*\qcmxIamp -1, -1);
  \end{scope}
  \node at (1.5+\qcmxOffsetX, 8.5+\qcmxOffsetY, 0) {\small{$\ket{1}$}};
}

\newcommand{\QCMXINTERNALrenderQz}{
  \draw[gray, ultra thick] (\qcmxOffsetX, \qcmxOffsetY, 0) -- (\qcmxOffsetX, \qcmxOffsetY, -10);
  
  %\ket{0}
  \begin{scope}[canvas is xy plane at z=0, shift={(\qcmxOffsetX,\qcmxOffsetY)}, rotate around={\qcmxOphase:(0,0)}]
    \draw[fill=gray!30] (-1,-1) rectangle (1, 1);
    \draw[fill=QCMXINTERNALmaincolor] (-1,-1) rectangle (2*\qcmxOamp -1, 2*\qcmxOamp -1);
    \draw[black, ->, thick, >=Stealth] (-1.01,-1) -- (2*\qcmxOamp -1, -1);
  \end{scope}
  \node at (1.5+\qcmxOffsetX, -1.5+\qcmxOffsetY, 0) {\small{$\ket{0}$}};

  %\ket{1}
  \begin{scope}[canvas is xy plane at z=-10, shift={(\qcmxOffsetX,\qcmxOffsetY)}, rotate around={\qcmxIphase:(0,0)}]
    \draw[fill=gray!30] (-1,-1) rectangle (1, 1);
    \draw[fill=QCMXINTERNALmaincolor] (-1,-1) rectangle (2*\qcmxIamp -1, 2*\qcmxIamp -1);
    \draw[black, ->, thick, >=Stealth] (-1.01,-1) -- (2*\qcmxIamp -1, -1);
  \end{scope}
  \node at (1.5+\qcmxOffsetX, -1.5+\qcmxOffsetY, -10) {\small{$\ket{1}$}};
}